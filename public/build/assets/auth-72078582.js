import{r as M,d as p,l as z,o as i,c as u,a as e,w as y,v as L,m as B,t as g,n as A,F as S,p as V,e as w,j as _,h as k,f as q,q as I,s as j,u as E,x as b,i as P,y as T,k as U}from"./axios-600a6aab.js";const N={class:"flex flex-col gap-y-14 pt-20 lg:pt-0"},R=["disabled"],K={key:0,class:"!mb-0 bg-indian/70 text-white px-12 py-9"},O={__name:"Login",emits:["login-success","switch-to-password-reset"],setup(r,{emit:o}){const s=M({email:"",password:""}),t=p({}),l=p(!1),n=p(!1),c=z(()=>s.email.trim()!==""&&s.password.trim()!==""),d=()=>{n.value=!0,t.value={}},f=async()=>{l.value=!0,t.value={},n.value=!1;try{const m=await _.post("/api/login",s);window.location.reload()}catch(m){m.response&&m.response.status===422?t.value=m.response.data.errors||{}:t.value={email:["Es ist ein Fehler aufgetreten."]},l.value=!1}};return(m,v)=>(i(),u("div",N,[e("div",null,[y(e("input",{type:"email","onUpdate:modelValue":v[0]||(v[0]=a=>s.email=a),class:"bg-white w-full px-12 py-8 font-spezia-medium font-medium text-xs leading-none text-olverra placeholder:text-xs placeholder:text-olverra !outline-none ring-0 focus:ring-0 focus-visible:ring-0",placeholder:"E-Mail-Adresse",onFocus:d,required:""},null,544),[[L,s.email]])]),e("div",null,[y(e("input",{type:"password","onUpdate:modelValue":v[1]||(v[1]=a=>s.password=a),class:"bg-white w-full px-12 py-8 font-spezia-medium font-medium text-xs leading-none text-olverra placeholder:text-xs placeholder:text-olverra !outline-none ring-0 focus:ring-0 focus-visible:ring-0",placeholder:"Passwort",onFocus:d,onKeyup:B(f,["enter"]),required:""},null,544),[[L,s.password]])]),e("button",{type:"button",onClick:f,disabled:l.value||!c.value,class:A(["bg-dravine font-spezia-medium font-medium text-xs leading-none text-olverra block w-full text-left px-12 py-11 transition-colors disabled:opacity-50",{"hover:bg-white":!l.value&&c.value}])},g(l.value?"Anmelden...":"Einloggen"),11,R),t.value.email&&!n.value?(i(),u("ul",K,[(i(!0),u(S,null,V(t.value.email,(a,h)=>(i(),u("li",{key:h},g(a),1))),128))])):w("",!0),e("div",null,[e("a",{href:"javascript:;",onClick:v[2]||(v[2]=a=>m.$emit("switch-to-password-reset")),class:"text-xs text-dravine hover:underline underline-offset-2 pl-12"}," Passwort vergessen? ")])]))}},C=(r,o)=>{const s=r.__vccOpts||r;for(const[t,l]of o)s[t]=l;return s},Z={},D={viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function H(r,o){return i(),u("svg",D,o[0]||(o[0]=[e("path",{d:"M12 8L4 8M12 8L9 5M12 8L9 11",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const W=C(Z,[["render",H]]),X={class:"flex flex-col gap-y-14 pt-20 lg:pt-0"},G={class:"bg-white w-full flex items-center min-h-36 px-12 py-8 font-spezia-medium font-medium text-xs leading-none text-olverra placeholder:text-xs placeholder:text-olverra"},J=["disabled"],Q={__name:"Logout",props:{userEmail:{type:String,required:!0}},emits:["logout-success"],setup(r,{emit:o}){const s=o,t=p(!1),l=async()=>{t.value=!0;try{await _.post("/api/logout"),s("logout-success"),window.location.reload()}catch(n){console.error("Logout failed:",n),window.location.reload()}};return(n,c)=>(i(),u("div",X,[e("div",null,[e("span",G,g(r.userEmail),1)]),e("div",null,[e("button",{type:"button",onClick:l,disabled:t.value,class:"bg-dravine flex items-center gap-x-8 font-spezia-medium font-medium text-xs leading-none text-olverra w-full text-left px-12 py-11 hover:bg-white transition-colors disabled:opacity-50"},[k(W,{class:"w-16 h-auto"}),q(" "+g(t.value?"Abmelden...":"Abmelden"),1)],8,J)])]))}},Y={class:"flex flex-col gap-y-14 text-xs"},ee={key:0,class:"font-spezia-medium font-medium text-white"},te={key:1,class:"flex flex-col gap-y-14"},se=["disabled"],oe={key:0,class:"bg-indian/70 text-white px-12 py-9"},le={__name:"PasswordReset",emits:["back-to-login"],setup(r,{emit:o}){const s=o,t=M({email:null}),l=p({}),n=p(!1),c=p(""),d=p(""),f=z(()=>t.email&&t.email.trim()!==""),m=async()=>{n.value=!0,l.value={},d.value="",c.value="";try{const a=await _.post("/api/password-reset",t);c.value="Ein neues Passwort wurde an Ihre E-Mail-Adresse gesendet.",t.email=null}catch(a){a.response&&a.response.status===422?l.value=a.response.data.errors||{}:a.response&&a.response.status===404?d.value="Kein Benutzer mit dieser E-Mail-Adresse gefunden.":d.value="Es ist ein Fehler aufgetreten."}finally{n.value=!1}},v=()=>{c.value="",d.value="",l.value={},t.email=null,s("back-to-login")};return(a,h)=>(i(),u("div",Y,[c.value?(i(),u("div",ee,g(c.value),1)):w("",!0),c.value?w("",!0):(i(),u("div",te,[e("div",null,[y(e("input",{type:"email",id:"reset-email","onUpdate:modelValue":h[0]||(h[0]=x=>t.email=x),class:"bg-white w-full px-12 py-8 font-spezia-medium font-medium text-xs leading-none text-olverra placeholder:text-xs placeholder:text-olverra !outline-none ring-0 focus:ring-0 focus-visible:ring-0",placeholder:"E-Mail-Adresse",required:""},null,512),[[L,t.email]])]),e("button",{type:"button",onClick:m,disabled:n.value||!f.value,class:A(["bg-dravine font-spezia-medium font-medium text-xs leading-none text-olverra block w-full text-left px-12 py-11 transition-colors disabled:opacity-50",{"hover:bg-white":!n.value&&f.value}])},g(n.value?"Wird gesendet...":"Neues Passwort senden"),11,se),l.value.email?(i(),u("div",oe,g(l.value.email[0]),1)):w("",!0)])),e("div",null,[e("a",{href:"javascript:;",onClick:v,class:"text-xs text-dravine hover:underline underline-offset-2 pl-12"}," ZurÃ¼ck zum Login ")])]))}},ne={},ae={width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ie(r,o){return i(),u("svg",ae,o[0]||(o[0]=[e("path",{d:"M18.445 0.5L10 8.944L1.557 0.5L0 2.055L8.445 10.5L0 18.945L1.557 20.5L10 12.055L18.445 20.5L20 18.944L11.556 10.5L20 2.055L18.445 0.5Z",fill:"currentColor"},null,-1)]))}const re=C(ne,[["render",ie]]),ue={},de={width:"14",height:"21",viewBox:"0 0 14 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ce(r,o){return i(),u("svg",de,o[0]||(o[0]=[e("path",{d:"M7 0.5C5.93913 0.5 4.92172 0.921427 4.17157 1.67157C3.42143 2.42172 3 3.43913 3 4.5C3 5.56087 3.42143 6.57828 4.17157 7.32843C4.92172 8.07857 5.93913 8.5 7 8.5C8.06087 8.5 9.07828 8.07857 9.82843 7.32843C10.5786 6.57828 11 5.56087 11 4.5C11 3.43913 10.5786 2.42172 9.82843 1.67157C9.07828 0.921427 8.06087 0.5 7 0.5Z",fill:"currentColor"},null,-1),e("path",{d:"M3.15 11.5L0 20.5H14L10.85 11.5H3.15Z",fill:"currentColor"},null,-1)]))}const pe=C(ue,[["render",ce]]),me={class:"flex justify-between items-center h-[var(--header-height-sm)] lg:h-[var(--header-height-lg)]"},ve={class:"text-sm"},ge={__name:"AuthWrapper",props:{initialLoggedIn:{type:Boolean,default:!1},initialUserEmail:{type:String,default:""}},setup(r){const o=r,s=p(!1),t=p(o.initialLoggedIn),l=p(o.initialUserEmail),n=p("login"),c=()=>{s.value=!0,window.dispatchEvent(new CustomEvent("auth-panel-opened"))},d=()=>{s.value=!1,n.value="login",window.dispatchEvent(new CustomEvent("auth-panel-closed"))},f=()=>{s.value?d():c()},m=()=>{},v=()=>{t.value=!1,l.value="",d()},a=h=>{f()};return I(()=>{window.addEventListener("toggle-auth",a)}),j(()=>{window.removeEventListener("toggle-auth",a)}),(h,x)=>(i(),u("div",null,[y(e("div",{onClick:d,class:"fixed left-0 top-0 z-10 bg-white/30 w-full h-full"},null,512),[[E,s.value]]),y(e("div",{class:"bg-olverra text-white font-spezia-medium font-medium text-xs fixed top-0 lg:top-12 right-0 2xl:right-[calc(((100%_-_var(--max-width-container))_/_2))] z-30 pt-12 lg:pt-0 px-20 lg:px-22 w-full lg:max-w-[336px] min-h-dvh lg:min-h-[calc(100dvh_-_12px)]",onClick:P(d,["self"]),style:T([{transition:"opacity 100ms ease-out"},{opacity:s.value?1:0}])},[e("div",me,[e("span",ve,g(t.value?"Logout":"Login"),1),e("span",null,[e("a",{href:"javascript:;",onClick:d,class:"flex items-center justify-center lg:block w-26 lg:w-14 h-20"},[k(re,{class:"w-20 h-auto text-white lg:hidden"}),k(pe,{class:"w-14 h-auto text-white hidden lg:block"})])])]),t.value?(i(),b(Q,{key:0,"user-email":l.value,onLogoutSuccess:v},null,8,["user-email"])):(i(),u(S,{key:1},[n.value==="login"?(i(),b(O,{key:0,onLoginSuccess:m,onSwitchToPasswordReset:x[0]||(x[0]=F=>n.value="password-reset")})):w("",!0),n.value==="password-reset"?(i(),b(le,{key:1,onBackToLogin:x[1]||(x[1]=F=>n.value="login")})):w("",!0)],64))],4),[[E,s.value]])]))}};_.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";_.defaults.headers.common.Accept="application/json";const $=document.head.querySelector('meta[name="csrf-token"]');$&&(_.defaults.headers.common["X-CSRF-TOKEN"]=$.content);document.addEventListener("DOMContentLoaded",()=>{const r=document.querySelector("#auth-app");if(r){const o=r.dataset.loggedIn==="true",s=r.dataset.userEmail||"";U(ge,{initialLoggedIn:o,initialUserEmail:s}).mount("#auth-app")}});
