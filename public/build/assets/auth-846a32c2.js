import{r as M,d as p,o as a,c as u,a as e,w,v as L,l as S,t as g,F as z,m as B,e as h,j as x,h as k,f as q,p as F,q as I,s as E,u as b,i as j,x as V,k as P}from"./axios-a5d8a57d.js";const T={class:"flex flex-col gap-y-14 pt-20 lg:pt-0"},U=["disabled"],N={key:0,class:"!mb-0 bg-indian/70 text-white px-12 py-9"},R={__name:"Login",emits:["login-success","switch-to-password-reset"],setup(r,{emit:o}){const s=M({email:"",password:""}),t=p({}),n=p(!1),l=p(!1),d=()=>{l.value=!0,t.value={}},c=async()=>{n.value=!0,t.value={},l.value=!1;try{const m=await x.post("/api/login",s);window.location.reload()}catch(m){m.response&&m.response.status===422?t.value=m.response.data.errors||{}:t.value={email:["Es ist ein Fehler aufgetreten."]},n.value=!1}};return(m,v)=>(a(),u("div",T,[e("div",null,[w(e("input",{type:"email","onUpdate:modelValue":v[0]||(v[0]=i=>s.email=i),class:"bg-white w-full px-12 py-8 font-spezia-medium font-medium text-xs leading-none text-olverra placeholder:text-xs placeholder:text-olverra !outline-none ring-0 focus:ring-0 focus-visible:ring-0",placeholder:"E-Mail-Adresse",onFocus:d,required:""},null,544),[[L,s.email]])]),e("div",null,[w(e("input",{type:"password","onUpdate:modelValue":v[1]||(v[1]=i=>s.password=i),class:"bg-white w-full px-12 py-8 font-spezia-medium font-medium text-xs leading-none text-olverra placeholder:text-xs placeholder:text-olverra !outline-none ring-0 focus:ring-0 focus-visible:ring-0",placeholder:"Passwort",onFocus:d,onKeyup:S(c,["enter"]),required:""},null,544),[[L,s.password]])]),e("button",{type:"button",onClick:c,disabled:n.value,class:"bg-dravine font-spezia-medium font-medium text-xs leading-none text-olverra block w-full text-left px-12 py-11 hover:bg-white transition-colors disabled:opacity-50"},g(n.value?"Anmelden...":"Einloggen"),9,U),t.value.email&&!l.value?(a(),u("ul",N,[(a(!0),u(z,null,B(t.value.email,(i,f)=>(a(),u("li",{key:f},g(i),1))),128))])):h("",!0),e("div",null,[e("a",{href:"javascript:;",onClick:v[2]||(v[2]=i=>m.$emit("switch-to-password-reset")),class:"text-xs text-dravine hover:underline underline-offset-2 pl-12"}," Passwort vergessen? ")])]))}},C=(r,o)=>{const s=r.__vccOpts||r;for(const[t,n]of o)s[t]=n;return s},K={},O={viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Z(r,o){return a(),u("svg",O,o[0]||(o[0]=[e("path",{d:"M12 8L4 8M12 8L9 5M12 8L9 11",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const D=C(K,[["render",Z]]),H={class:"flex flex-col gap-y-14 pt-20 lg:pt-0"},W={class:"bg-white w-full flex items-center min-h-36 px-12 py-8 font-spezia-medium font-medium text-xs leading-none text-olverra placeholder:text-xs placeholder:text-olverra"},X=["disabled"],G={__name:"Logout",props:{userEmail:{type:String,required:!0}},emits:["logout-success"],setup(r,{emit:o}){const s=o,t=p(!1),n=async()=>{t.value=!0;try{await x.post("/api/logout"),s("logout-success"),window.location.reload()}catch(l){console.error("Logout failed:",l),window.location.reload()}};return(l,d)=>(a(),u("div",H,[e("div",null,[e("span",W,g(r.userEmail),1)]),e("div",null,[e("button",{type:"button",onClick:n,disabled:t.value,class:"bg-dravine flex items-center gap-x-8 font-spezia-medium font-medium text-xs leading-none text-olverra w-full text-left px-12 py-11 hover:bg-white transition-colors disabled:opacity-50"},[k(D,{class:"w-16 h-auto"}),q(" "+g(t.value?"Abmelden...":"Abmelden"),1)],8,X)])]))}},J={class:"flex flex-col gap-y-14 text-xs"},Q={key:0,class:"font-spezia-medium font-medium text-white"},Y={key:1,class:"flex flex-col gap-y-14"},ee=["disabled"],te={key:0,class:"bg-indian/70 text-white px-12 py-9"},se={__name:"PasswordReset",emits:["back-to-login"],setup(r,{emit:o}){const s=o,t=M({email:null}),n=p({}),l=p(!1),d=p(""),c=p(""),m=async()=>{l.value=!0,n.value={},c.value="",d.value="";try{const i=await x.post("/api/password-reset",t);d.value="Ein neues Passwort wurde an Ihre E-Mail-Adresse gesendet.",t.email=null}catch(i){i.response&&i.response.status===422?n.value=i.response.data.errors||{}:i.response&&i.response.status===404?c.value="Kein Benutzer mit dieser E-Mail-Adresse gefunden.":c.value="Es ist ein Fehler aufgetreten."}finally{l.value=!1}},v=()=>{d.value="",c.value="",n.value={},t.email=null,s("back-to-login")};return(i,f)=>(a(),u("div",J,[d.value?(a(),u("div",Q,g(d.value),1)):h("",!0),d.value?h("",!0):(a(),u("div",Y,[e("div",null,[w(e("input",{type:"email",id:"reset-email","onUpdate:modelValue":f[0]||(f[0]=y=>t.email=y),class:"bg-white w-full px-12 py-8 font-spezia-medium font-medium text-xs leading-none text-olverra placeholder:text-xs placeholder:text-olverra !outline-none ring-0 focus:ring-0 focus-visible:ring-0",placeholder:"E-Mail-Adresse",required:""},null,512),[[L,t.email]])]),e("button",{type:"button",onClick:m,disabled:l.value,class:"bg-dravine font-spezia-medium font-medium text-xs leading-none text-olverra block w-full text-left px-12 py-11 hover:bg-white transition-colors disabled:opacity-50"},g(l.value?"Wird gesendet...":"Neues Passwort senden"),9,ee),n.value.email?(a(),u("div",te,g(n.value.email[0]),1)):h("",!0)])),e("div",null,[e("a",{href:"javascript:;",onClick:v,class:"text-xs text-dravine hover:underline underline-offset-2 pl-12"}," ZurÃ¼ck zum Login ")])]))}},oe={},ne={width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function le(r,o){return a(),u("svg",ne,o[0]||(o[0]=[e("path",{d:"M18.445 0.5L10 8.944L1.557 0.5L0 2.055L8.445 10.5L0 18.945L1.557 20.5L10 12.055L18.445 20.5L20 18.944L11.556 10.5L20 2.055L18.445 0.5Z",fill:"currentColor"},null,-1)]))}const ae=C(oe,[["render",le]]),ie={},re={width:"14",height:"21",viewBox:"0 0 14 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ue(r,o){return a(),u("svg",re,o[0]||(o[0]=[e("path",{d:"M7 0.5C5.93913 0.5 4.92172 0.921427 4.17157 1.67157C3.42143 2.42172 3 3.43913 3 4.5C3 5.56087 3.42143 6.57828 4.17157 7.32843C4.92172 8.07857 5.93913 8.5 7 8.5C8.06087 8.5 9.07828 8.07857 9.82843 7.32843C10.5786 6.57828 11 5.56087 11 4.5C11 3.43913 10.5786 2.42172 9.82843 1.67157C9.07828 0.921427 8.06087 0.5 7 0.5Z",fill:"currentColor"},null,-1),e("path",{d:"M3.15 11.5L0 20.5H14L10.85 11.5H3.15Z",fill:"currentColor"},null,-1)]))}const ce=C(ie,[["render",ue]]),de={class:"flex justify-between items-center h-[var(--header-height-sm)] lg:h-[var(--header-height-lg)]"},pe={class:"text-sm"},me={__name:"AuthWrapper",props:{initialLoggedIn:{type:Boolean,default:!1},initialUserEmail:{type:String,default:""}},setup(r){const o=r,s=p(!1),t=p(o.initialLoggedIn),n=p(o.initialUserEmail),l=p("login"),d=()=>{s.value=!0,window.dispatchEvent(new CustomEvent("auth-panel-opened"))},c=()=>{s.value=!1,l.value="login",window.dispatchEvent(new CustomEvent("auth-panel-closed"))},m=()=>{s.value?c():d()},v=()=>{},i=()=>{t.value=!1,n.value="",c()},f=y=>{m()};return F(()=>{window.addEventListener("toggle-auth",f)}),I(()=>{window.removeEventListener("toggle-auth",f)}),(y,_)=>(a(),u("div",null,[w(e("div",{onClick:c,class:"fixed left-0 top-0 z-10 bg-white/30 w-full h-full"},null,512),[[E,s.value]]),w(e("div",{class:"bg-olverra text-white font-spezia-medium font-medium text-xs fixed top-0 lg:top-12 right-0 2xl:right-[calc(((100%_-_var(--max-width-container))_/_2))] z-30 pt-12 lg:pt-0 px-20 lg:px-22 w-full lg:max-w-[336px] min-h-dvh lg:min-h-[calc(100dvh_-_12px)]",onClick:j(c,["self"]),style:V([{transition:"opacity 100ms ease-out"},{opacity:s.value?1:0}])},[e("div",de,[e("span",pe,g(t.value?"Logout":"Login"),1),e("span",null,[e("a",{href:"javascript:;",onClick:c,class:"flex items-center justify-center lg:block w-26 lg:w-14 h-20"},[k(ae,{class:"w-20 h-auto text-white lg:hidden"}),k(ce,{class:"w-14 h-auto text-white hidden lg:block"})])])]),t.value?(a(),b(G,{key:0,"user-email":n.value,onLogoutSuccess:i},null,8,["user-email"])):(a(),u(z,{key:1},[l.value==="login"?(a(),b(R,{key:0,onLoginSuccess:v,onSwitchToPasswordReset:_[0]||(_[0]=A=>l.value="password-reset")})):h("",!0),l.value==="password-reset"?(a(),b(se,{key:1,onBackToLogin:_[1]||(_[1]=A=>l.value="login")})):h("",!0)],64))],4),[[E,s.value]])]))}};x.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";x.defaults.headers.common.Accept="application/json";const $=document.head.querySelector('meta[name="csrf-token"]');$&&(x.defaults.headers.common["X-CSRF-TOKEN"]=$.content);document.addEventListener("DOMContentLoaded",()=>{const r=document.querySelector("#auth-app");if(r){const o=r.dataset.loggedIn==="true",s=r.dataset.userEmail||"";P(me,{initialLoggedIn:o,initialUserEmail:s}).mount("#auth-app")}});
